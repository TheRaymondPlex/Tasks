{% extends 'layouts/default.twig' %}
{% block title %}
    Car Showroom Dashboard
{% endblock %}
{% block content %}
    <main>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1 class="stroke">car showroom dashboard</h1>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-6">
                    Ср. стоимость проданных авто за всё время
                    <div>{% if avrAllTime %}
                            {{ avrAllTime }}
                        {% else %}
                            0
                        {% endif %}
                    </div>
                </div>
                <div class="col-6">
                    Ср. стоимость проданных сегодня авто
                    <div>{% if avrToday %}
                        {{ avrToday }}
                        {% else %}
                        0
                        {% endif %}
                    </div>
                </div>
            </div>
            <hr>
            <div class="row text-uppercase text-bg-success">
                <div class="col-12">sold last year</div>
            </div>
            <br>
            <div class="row">
                <div class="col-12">
                    {% if lastYear %}
                    <table class="table table-dark table-bordered table-striped-columns table-hover">
                        <thead class="thead-light">
                        <tr>
                            <th scope="col">День</th>
                            <th scope="col">Количество</th>
                        </tr>
                        </thead>
                        <tbody>
                            {% for day in lastYear %}
                            <tr>
                                <td>{{ day.date_of_sale }}</td>
                                <td>{{ day.sales_on_day }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                        <div>No data!</div>
                    {% endif %}
                </div>
            </div>
            <hr>
            <div class="row text-uppercase text-bg-danger">
                <div class="col-12">Not sold</div>
            </div>
            <br>
            <div class="row">
                <div class="col-12">
                    {% if unsold %}
                    <table class="table table-dark table-bordered table-striped-columns table-hover">
                        <thead class="thead-light">
                        <tr>
                            <th scope="col">Модель</th>
                            <th scope="col">Год производства</th>
                            <th scope="col">Цвет</th>
                            <th scope="col">Цена</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for car in unsold %}
                            <tr>
                                <td>{{ car.model }}</td>
                                <td>{{ car.year }}</td>
                                <td>{{ car.color }}</td>
                                <td>{{ car.price }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                        <div>No data!</div>
                    {% endif %}
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-2">
                    В продаже
                </div>
                <div class="col-10">
                    {% if onSale %}
                        <ul id="sale-car-list">
                            {% for car in onSale %}
                                <li>{{ car.model }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
        </div>
    </main>
{% endblock %}